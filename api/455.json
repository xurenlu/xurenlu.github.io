{"title":"老覃的性能测试","zzzContent":"<a href=\"http://chin.bokee.com/6398886.html\" target=\"_blank\">老覃同学做了一个测试</a>，来比较PHP5下利用function,class来编程时的效率差异。\n我一向喜欢钻牛角尖：\n有两个疑问：\n1.ab本身的文档说了,ab自身是需要CPU资源的,有时候要注意你可能不是在测apache的性能，而是在测ab这个软件的性能。老覃同志如何去除ab的影响?\n2.php编译时也是花费CPU时间的。我做了另一组测试:\n<coolcode>\n//t1.php\n</coolcode>\n\nfunction signin()\n\n{\n\necho \"signin\";\n\n}\n\nsignin();\n\n?&gt;\n\nab -n 10000 -c 50 的结果是:\n1534.15 [#/sec]\nTime per request:       32.591 [ms] (mean)\n\n,再另外一个:\n<coolcode></coolcode>\n\nfunction signin()\n\n{\n\necho \"signin\";\n\n}\n\n//signin();\n\n?&gt;\n\nab -n 10000 -c 50的结果是:\n1748.48 [#/sec],  Time per request:       28.596 。\n就是说，算上ab的花费,apache的花费,php编译的花费,这几个的时间消费可能已经比php代码运行的时间花费要大了。加上运行的代码后,只相关几个ms。\n如果要进行精确的比较,老覃的做法可能很不可靠。\nPHP4与PHP5.20的效率目前还只有看官方的数据。\n另外有个疑问，我的php比老覃同志的似乎快了不少,相差好几倍。可能是我的是Fedora 下运行的结果。\n\n附注：\n\n我后来做了一个实验,ab  -n 10000 -c 50 http://localhost/test/23442.php  ，返回的结果是:\n\n<coolcode>\nRequests per second:    2192.03 [#/sec] (mean)\nTime per request:       22.810 [ms] (mean)\n</coolcode>\n这是在请求的文件不存在下,apache简单返回一个静态面的情况下的。由此看来，ab和apache的开销就已经占了大约20ms.\n\n再注,在<a href=\"http://soft.zdnet.com.cn/software_zone/2007/0806/446249.shtml\">这里\n</a>是老覃的同事做的测试.我google得到了这个结果.","postDate":"2007-08-21 01:33:14","postId":455,"type":"post","status":"publish","imported":true,"file":"455.md"}