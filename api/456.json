{"title":"老覃的性能测试(2)","zzzContent":"我又写了一个文件.再测之:\n<coolcode>\n\n<?php\n\nfunction signin()\n{\n\treturn \"null\";\n}\nclass User\n{\n    public function signin()\n    {\n\t\treturn \"null\";\n    }\n\n}\nfunction time1()\n{\n\t$arr=split(\" \",microtime());\n\treturn $arr[1]+$arr[0];\n}\n$t1= time1();\nfor($i=0;$i<100000;$i++)\nsignin();\n$t2=time1();\n\nfor($i=0;$i<100000;$i++)\nUser::signin();\n$t3=time1();\n\necho \"\nfunction:\".($t2-$t1).\"ms\nclass:\".($t3-$t2).\"ms\";\n</coolcode>\n这是结果:\n<coolcode>\nfunction:0.071924924850464ms\nclass:0.23149108886719ms\n</coolcode>\n为了避免程序运行顺序的影响，我们再运行一次，这次先测静态类的,再测function的:\n<coolcode>\n<?php\n\nfunction signin()\n{\n\treturn \"null\";\n}\nclass User\n{\n    public function signin()\n    {\n\t\treturn \"null\";\n    }\n\n}\nfunction time1()\n{\n\t$arr=split(\" \",microtime());\n\treturn $arr[1]+$arr[0];\n}\n$t1= time1();\n\nfor($i=0;$i<100000;$i++)\nUser::signin();\n$t2=time1();\n\nfor($i=0;$i<100000;$i++)\nsignin();\n$t3=time1();\n\necho \"\nfunction:\".($t3-$t2).\"ms\nclass:\".($t2-$t1).\"ms\";\n</coolcode>\n这次测的时间如下:\n<coolcode>\nfunction:0.072422027587891ms\nclass:0.26213884353638ms\n</coolcode>\n从这个结果来看,php的function还是相当快的，比class,哪怕是静态方法要快。\n看来我越来越喜欢用function的路子是对的。\n\n后来我加上另一个，把整个结果贴出来:\n<coolcode>\n$obj=& new User();\n\n$t1= time1();\n\nfor($i=0;$i<100000;$i++)\nUser::signin();\n$t2=time1();\n\nfor($i=0;$i<100000;$i++)\nsignin();\n$t3=time1();\n\nfor($i=0;$i<100000;$i++)\n$obj->signin();\n$t4=time1();\n\nfor($i=0;$i<100000;$i++)\n{\n\t$obj1=& new User();\n\t$obj1->signin();\n}\n$t5=time1();\necho \"\nfunction:\".($t3-$t2).\"ms\nclass:\".($t2-$t1).\"ms\nobject:\".($t4-$t3).\"ms\nnew object:\".($t5-$t4).\"ms\";\n</coolcode>\n结果是:\n<coolcode>\nfunction:0.071459054946899ms\nclass:0.23710894584656ms\nobject:0.08794093132019ms\nnew object:0.17567801475525ms\n</coolcode>\n也就是说,直接调用function是最快的,其次是重复调用已存在对象的方法，仅比纯function慢一点点。\n接着是先新建class的实例再调用方法，最慢的是直接调用静态方法。\n这个结果有一点点出乎我的意料，我没料到静态方法是最慢的一个。","postDate":"2007-08-21 02:07:21","postId":456,"type":"post","status":"publish","imported":true,"file":"456.md"}