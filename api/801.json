{"title":"前面的兄弟用PDO时给我留的Mysql陷阱....","zzzContent":"好吧。害死我了。直接上代码:\n<coolcode>\nselect count(*) as count from event_shop where ownerid in ('15071');\n+-------+\n| count |\n+-------+\n|     1 |\n+-------+\n1 row in set (0.00 sec)\nmysql> select count(*) as count from event_shop where ownerid in ('15070');\n+-------+\n| count |\n+-------+\n|   270 |\n+-------+\n1 row in set (0.00 sec)\nmysql> select count(*) as count from event_shop where ownerid in ('15071,15070');\n+-------+\n| count |\n+-------+\n|     1 |\n+-------+\n1 row in set (0.01 sec)\nselect count(*) as count from event_shop where ownerid in ('15070,15071');\n+-------+\n| count |\n+-------+\n|   270 |\n+-------+\n1 row in set (0.01 sec)\n</coolcode>\n好吧。这个sql怎么来的呢?我跟到了前任同学留下的代码（当然，这个代码转手了四次，也不知道是不是他写的...)\n<coolcode lang=\"php\">\n$sql='select * from event_shop where ownerid in (?) ';\n$param[] = implode(',',$friend_list);\n$st = $dbh->prepare($sql);\n$res = $st->execute($param);\n</coolcode>\n当QA给我报Bug的时候，我一直以为QA的帐号有问题呢。最后发现竟然有这个问题....\n他爷爷的，我原来的代码不肯用PDO,安全部门审一次代码就提醒我一次,搞得我很郁闷。可是用了PDO更郁闷啊。不过现在看来，我还是要坚持不用PDO。就算用，也自己写每一行SQL.能自动凑SQL语句的msp啥的，效率上看简直是一个笑话。","postDate":"2009-01-08 19:35:21","postId":801,"type":"post","status":"publish","imported":true,"file":"801.md"}