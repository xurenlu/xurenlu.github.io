{"title":"lighttpd上搞定wordpress,给出详细步聚.","zzzContent":"<p>千辛万苦，终于将博客搬家了。原来是用的edong.com的主机，现在转到了lighttpd+fastcgi上面。</p>\n<p>第一步:导出原空间的数据。这个得用phpmyadmin来进行。注意的时，在导出数据时，由于导出来的中文有乱码，故而我先将所有text,varchar类型数据转成了blob类型 ，然后选中将“二进制区域使用十六进制显示”这一项，这样，导出的数据中就不会有显示不了的乱码什么的，有文字的地方都是0xf535acd....这样的东东。</p>\n<p>第二步:自然是在新服务器上用mysql -u  *** -p newdatabasename < export.sql 将数据库导入进去。</p>\n<p>第三步:修改wp-config.php中数据库连接信息。</p>\n<p>第四步:如果这时你访问时，能直接用原密码直接进入数据库，那么很幸运，你直接登陆就是了!</p>\n<p>如果能登陆，但进入后台时，提示你无权限进入本页面，那么也很幸运，你又可以再熟悉一次安装流程了。这时很简单，把wp-config.php中的表示数据表前缀的改掉，然后再走流程安装一次。安装完后之后，记得登陆phpmyadmin把你需要的表比如wp_posts改成新的前缀名（之前你当然得删除wordpress的安装流程为你生成的对应的表)。比如，本来我的表都是带wp_的前缀，现在将table_prefix改为wp_2然后进行了安装，那么您应该把wp2_posts表删掉，然后把wp_posts改名为wp2_posts.同理，其他需要转移的表比如comments,categories等 等也要转移地过来。</p>\n<p>在安装时,我遇到了一点小麻烦:当输入我的email进行下一步时，系统提示这是第二步，并告诉我将要进行一些建表，加载数据操作。但是不幸地是，没有告诉我新生成的密码！我找到了这一行:</p>\n<p><coolcode></p>\n<p>$random_password = substr(md5(uniqid(microtime())), 0, 6);</p>\n<p></coolcode></p>\n<p>改成为</p>\n<p><coolcode></p>\n<p>$random_password=\"123456\";<br />\n</coolcode><br />\n然后将</p>\n<p><coolcode></p>\n<p>@wp_mail($admin_email,_(\"New wordpress blog\",....)</p>\n<p></coolcode>注释掉。现在没有什么拦住我了。我猜想是因为新的机器上没有sendmail服务，所以导致安装进程不能进行下去。现在安装成功能，默认密码就是:123456.</p>\n<p>最后一步：太重要了:修改永久链接,以保持和原来的url一致。如果你的博客pr不高，访问量不怎么高，那么做不做无所谓。但是从SEO角度讲，最好还是保持一致。我原来的博客的链接设置的是:</p>\n<p><coolcode></p>\n<p>/archives/%post_id%.html</p>\n<p></coolcode><br />\n但是现在是lighttpd做server,它不支持apache的.htaccess文件里写mod_rewrite规则，怎么办？</p>\n<p>我google了一下，找到一段巨复杂的正则表达式，却仍 不管用。自己看了一下.htaccess:</p>\n<p><coolcode></p>\n<p>RewriteCond %{REQUEST_FILENAME} !-f<br />\nRewriteCond %{REQUEST_FILENAME} !-d<br />\nRewriteRule . /index.php [L]<br />\n</coolcode></p>\n<p>就是指当请求的地址不是一个文件也不是一个目录时，转向到index.php这个文件来处理，由index.php来判断、处理。okay,现在好办了，我马上在lighttpd里加了这么一段:</p>\n<p><coolcode></p>\n<p>server.error-handler-404= \"/index.php\"</p>\n<p></coolcode></p>\n<p>.okay,现在重启lighttpd,一切完美！现在你的wordpress又可以像在apache下拥有mod_rewrite一样可以随意设置永久链接了!</p>\n<p></coolcode>\n</p>\n特别感谢<a href=\"http://chin.bokee.com/\">老覃</a>同志的帮忙.","postDate":"2007-06-16 20:17:41","postId":410,"type":"post","status":"publish","imported":true,"file":"410.md"}