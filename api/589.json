{"title":"继续与垃圾评论发送机们斗智斗勇","zzzContent":"呵呵。\n最初一版改进时，加上了这样两个条件判断：\n1.当内容包含一个以上的链接时，记为“不安全”的评论。\n2.当内容全英文时，记为“不安全”的评论。\n\n不安全的评论将不直接入库，而是显示在一张表单中，这样，如果确实是人类，都知道再点击一次就可以继续发布。\n但是这个程序只让我安静了两个月，又发现了很智能的程序：他们发现这个新的表单后会继续\"点击\"提交评论。\n于是今天我再次更改代码，在表单中“嵌入”新东西：\n<coolcode>\n<div style=\"display:none;\"> <input name=\"mail\" value=\"\" ></div>\n<div style=\"display:none;\" id=\"spam-div\" ></div><script >var date=new Date();var value=date.getFullYear()+\"-\"+(date.getMonth()+1)+\"-\"+\n(date.getDate());\ndocument.getElementById(\"spam-div\").innerHTML=\n'<input name=\"hdcode\" value=\"'+value+'\" >';</script>\n</coolcode>\n嘿嘿，这两段代码，给这些spam程序两个陷阱。这些spam程序现在很智能，能够自动搜寻表单，自动填充内容。但是如果不是在浏览器环境下，js和css没有被解释，它们还是会上当的。人类是看不见这两个框的，而程序会自做聪明地往mail这一项里填值。嘿嘿，看看这个加上后效果怎么样！","postDate":"2008-01-06 00:54:34","postId":589,"type":"post","status":"publish","imported":true,"file":"589.md"}