{"title":"AutoMake 学习笔记－－－使用过程","zzzContent":"过程记录：\n1.autoscan\n2.修改configure.scan，重命名为configure.in,编辑Ｍａｋｅｆｉｌｅ.ａｍ\n3.运行aclocal\n4.autoconf\n5.automake --add-missing\n6.好了，你可以configure &&　ｍａｋｅ　&&　ｍａｋｅ　ｉｎｓｔａｌｌ了。\n\n实例记录:\n1. mkdir h2\n2.cd h2\n3. vim h2.c,内容如下:\n<coolcode>\n#include <stdio.h>\nint main()\n{\n        printf(\"hi, This is jerry\");\n        return 0;\n}\n</coolcode>\n4.运行autoscan，将生成autoscan.log和configure.scan\n5.将configure.scan命名为configure.in，并修改:我这里内容如下:\n<coolcode>\n#                                               -*- Autoconf -*-\n# Process this file with autoconf to produce a configure script.\n\nAC_PREREQ(2.61)\nAC_INIT(h2, 1.0,xurenlu@gmail.com)\nAC_CONFIG_SRCDIR([h2.c])\nAC_CONFIG_HEADER([config.h])\nAM_INIT_AUTOMAKE(h2,1.0)\n\n# Checks for programs.\nAC_PROG_CC\n\n# Checks for libraries.\n\n# Checks for header files.\n\n# Checks for typedefs, structures, and compiler characteristics.\n\n# Checks for library functions.\nAC_CONFIG_FILES(Makefile)\nAC_OUTPUT\n\n</coolcode>\n与autoscan生成的文件相比，我加了这两行:\n<coolcode>\nAM_INIT_AUTOMAKE(h2,1.0)\n\nAC_CONFIG_FILES(Makefile)\n</coolcode>\n同时改了这样几行:\n<coolcode>\nAC_INIT(h2, 1.0,xurenlu@gmail.com)\n</coolcode>\n\n现在我们编辑Makefile.am:\n内容如下:\n<coolcode>\nAUTOMAKE_OPTIONS=foreign\nbin_PROGRAMS=h2\nh2_SOURCES=h2.c\n</coolcode>\n接下来运行aclocal\n此时会生成aclocal.m4和autom4te.cache。\n我们运行:autoconf生成configure文件.\n再运行autohead 生成config.h.in\n最后运行automake --add-missing 就能得到Makefile.in了\n有了这个，就可以configure了。\n在网上搜到这样一个图:\n\n<a href='http://www.162cm.com/wp-content/uploads/2008/04/image002.gif' title='image002.gif'><img src='http://www.162cm.com/wp-content/uploads/2008/04/image002.gif' alt='image002.gif' /></a>","postDate":"2008-04-18 20:44:00","postId":624,"type":"post","status":"publish","imported":true,"file":"624.md"}