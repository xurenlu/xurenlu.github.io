{"title":"rails 每周乱弹:session有效期","zzzContent":"默认情况下,Rails是将session信息存放在Cookie中的,但是这个Cookie的过期设置是默认的,浏览器一关闭就自动过期了.我想设置了长时间记住用户,比如,一个月内不需要再次登陆,需要这么做:\n1.将Rails升级到新版,2.3.*,我的是2.3.8了;注意这是必须的,因为我之前也是按照一些资料的说明做了第二步,但是不管用,后来发现是rails的版本问题;\n2.在config/environment.rb里添加:\n<coolcode>\n  config.action_controller.session = {\n    :session_key => '_good_session',\n    :secret=>\n                                                                                                                  '97feddf5fdsfdsfdsfdsfdsfds8bc7d78848a4bd45fe787340466c9598e61dc943d5a8dfb57030094160f52f04d335f4f96641dc9145fa7d57dcgg8673r2iofiewpdjdspiuewpwiudspoewioewpiewpwew',\n    :expire_after => 86400*30\n  }\n\n</coolcode>\n\n我添加了:expire_after这一行,这一行即指明了过期时间;\n另外,在新版rails中:session_key这个名称变成了:key,需要注意.\nRails升级很快,而且经常不向下兼容,这一点让人比较郁闷.","postDate":"2010-08-01 20:21:59","postId":1163,"type":"post","status":"publish","imported":true,"file":"1163.md"}